;==========================================================
;== MACHINE             : BAZ Liflex I1 1276 / TC ROT
;== PROGRAM_NAME        : Pruefwerkstueck / test workpiece
;==========================================================
;==========================================================
;-------------- CHANGES IN PROGRAM ------------------------
;
; DATE         VERSION    CHANGE                CHANGED BY
; 2015/01/29      1.0       CREATED               Th. Henrich
; 2015/12/28      1.1       CUSTOMIZED            D. Hermann
; 2016/07/28      1.2       CUSTOMIZED            D. Hermann
; 2022/03/17      1.3       CUSTOMIZED            M. SOMMER (Simuliert und MOVE TO TC angepasst)
; 2022/03/24      1.4       CUSTOMIZED            M. SOMMER (CYCLE800 von77.5 auf 76.5 abge�ndert, 2.Schr�ge seitlich Schr�g fr�sen T03 eingef�gt)
; 2023/07/05      2.0       CUSTOMIZED            S. Koesling (Anpassung auf TC ROT)
; 2023/10/19	  2.1		CUSTOMIZED			  J.Barth (Au�enma�e auf 77.5 geaendert, Schraege korrigiert)
;==========================================================
N1000 DEF FRAME _WKSFRAME
N1020 DEF REAL _SPD_T1,_SPD_T2,_SPD_T3,_SPD_T4
N1030 DEF REAL _FED_T1,_FED_T2,_FED_T3,_FED_T4
;==========================================================
N1010 DEF INT EINFAHREN=1 ; =0 Verweilzeit 15min // =1 ohne Verweilzeit 
;==========================================================
;Hier das g�ltige K�hlssystem einblenden
;N1040 define KUEHLUNG_EIN as M10                       ;Option KSS 
;N1040 define KUEHLUNG_EIN as M10 H3=$TC_TPC5[$P_TOOLNO];Option KSS + Druckstufen 
N1050 define KUEHLUNG_EIN as H3=$TC_TPC4[$P_TOOLNO]*100+$TC_TPC5[$P_TOOLNO] ;Option MSS 
N1060 define KUEHLUNG_AUS as M11 H3=0
;==========================================================
;Berechnung Spindeldrehzahl
;   _FED_T? (_Fed*)    : Werkzeugspezifischer Vorschub        (REAL)
;   _SPD_T? (_SPD*)    : Werkzeugspezifische Drehzahl         (REAL)
N1070 _SPD_T1=3600  _FED_T1=2000
N1080 _SPD_T2=4000  _FED_T2=800
N1100 _SPD_T3=10000 _FED_T3=3000*0.75
N1120 _SPD_T4=4774  _FED_T4=477
;==========================================================
;Anpassung Schnittgeschwindigkeit bei max. Drehzahl< prog. Drehzahl
N1140 IF $MA_SPIND_VELO_LIMIT[SP_11]<_SPD_T1
N1160     STOPRE
N1180     _FED_T1=((_FED_T1/_SPD_T1)*$MA_SPIND_VELO_LIMIT[SP_11])
N1200 	_SPD_T1=$MA_SPIND_VELO_LIMIT[SP_11]
N1220 ENDIF
N1240 IF $MA_SPIND_VELO_LIMIT[SP_11]<_SPD_T2
N1260     STOPRE
N1280     _FED_T2=((_FED_T2/_SPD_T2)*$MA_SPIND_VELO_LIMIT[SP_11])
N1300 	_SPD_T2=$MA_SPIND_VELO_LIMIT[SP_11]
N1320 ENDIF
N1340 IF $MA_SPIND_VELO_LIMIT[SP_11]<_SPD_T3
N1360     STOPRE
N1380     _FED_T3=((_FED_T3/_SPD_T3)*$MA_SPIND_VELO_LIMIT[SP_11])
N1400 	_SPD_T3=$MA_SPIND_VELO_LIMIT[SP_11]
N1420 ENDIF
N1440 IF $MA_SPIND_VELO_LIMIT[SP_11]<_SPD_T4
N1460     STOPRE
N1480     _FED_T4=((_FED_T4/_SPD_T4)*$MA_SPIND_VELO_LIMIT[SP_11])
N1500 	_SPD_T4=$MA_SPIND_VELO_LIMIT[SP_11]
N1520 ENDIF
;==========================================================
N1540 PROG_NR=1   ;Schreiben der Programmnummer
;N40 H99=PROG_NR ;Uebergabe Progr. Nr. an SPS
;N50 M28         ;Plausibilitaetspruefung -> Programmanwahl OK ??
;==========================================================

;==========================================================
;====== NULLPUNKTAUFRUF SPANNVORRICHTUNGEN JE KANAL =======
;Read Zeropoint
;Check Zeropoint
;Read correction parameters

N1560 CALL ("/_N_WKS_DIR/_N_PRUEFWERKSTUECK_WPD/_N_OFFSET_SPF")
N1580 CALL ("/_N_WKS_DIR/_N_PRUEFWERKSTUECK_WPD/_N_ZP_CHECK_SPF")
;==========================================================
N1600 PAROTOF     ;ROT-Anteil loeschen
N1620 TCARR=0     ;Alle ToolCarrier abwaehlen
N1640 TRANS       ;programmierbare Frames loeschen
N1660 CYCLE800()  ;Reset cycle800
;==========================================================
N1680 ;ZEITNAHME ;Read NC-Program
;==========================================================
M0 ;ACHTUNG OFFSET RTL IMMER PRUEFEN UND ZU ROHTEIL/SCHRAUBSTOCK ANPASSEN !!!

;___________________________________________________________________
;Beschreibung der R-Parameter + T-Nr. + Bearbeitungseben
;R99=0   =  T1   /   /
;R99=1   =  T3   /   /
;R99=2   =  T2   /   /
;R99=3   =  T4   /   /
;____________________________________________________________________

;================Programm pointer==========================
gotof "LABLE_"<<R99
;================================================================

;================================================================
;T1
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N1860 LABLE_0: WHEN TRUE DO $R99=0
N1880 G17 G510 G90 G40
;M00 ;SK
;N1900 CYCLE800(0,"Licon_AB1",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N1900 CYCLE800(0,"Licon_AB1",220000,192,0,0,0,-90,180,0,0,0,0,0,0,0)


T="01" ;Werkzeugauswahl
TOOLCHANGE("03",,_TC_A1,_TC_A2,1,0,0,0,)
LI_TOOL_CHECK(265.00,10,1.0,1)

;ZEITNAHME

N1960 G17 G510 G90 G40 D1
;N2060 WHEN TRUE DO M1=3 S1=_SPD_T1 M2=3 S2=_SPD_T1
N2060 WHEN TRUE DO M1=3 S1=_SPD_T1 
N2000 G153 D0 G0 Z=_zHOME
;G0 X=0 Y=0
;M0
;N2080 WHEN TRUE DO $AA_OFF[CHAN_AX]=WZLA_D1 ;Kanalachse korrigieren
N2100 G0 G90 G64 X=-88.5 Y=72.5 D1
WHEN TRUE DO COOLANT_LP_ON
WHEN TRUE DO KUEHLUNG_EIN
N2120 WAITP(A_11,B_11)
N2140 G0 Z=15

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2160 G0 Z=15
N2180 WAITS ;wait until speed is reached
N2200 G0 Z=5
;WHEN TRUE DO $AN_SLTRACE=1
N2220 G1 Z=0 F=_FED_T1
N2240 G1 X=88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2260 G1 G64 X=88.5 Y=57.5 D1
N2280 G1 Z=0
;;WHEN TRUE DO $AN_SLTRACE=1
N2300 G1 X=-88.5
;;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2320 G1 G64 X=-88.5 Y=42.5 D1
N2340 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2360 G1 X=88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2380 G1 G64 X=88.5 Y=27.5 D1
N2400 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2420 G1 X=-88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2440 G1 G64 X=-88.5 Y=12.5 D1
N2460 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2480 G1 X=88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2500 G1 G64 X=88.5 Y=-2.5 D1
N2520 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2540 G1 X=-88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2560 G1 G64 X=-88.5 Y=-17.5 D1
N2580 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2600 G1 X=88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2620 G1 G64 X=88.5 Y=-32.5 D1
N2640 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2660 G1 X=-88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2680 G1 G64 X=-88.5 Y=-47.5 D1
N2700 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2720 G1 X=88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2740 G1 G64 X=88.5 Y=-62.5 D1
N2760 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2780 G1 X=-88.5
;WHEN TRUE DO $AN_SLTRACE=2

;PLANFRAESEN VORDERSEITE
;ZEITNAHME
N2800 G1 G64 X=-88.5 Y=-77.5 D1
N2820 G1 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N2840 G1 X=88.5
;WHEN TRUE DO $AN_SLTRACE=2
N2860 G0 Z=15

;UNTERSTE STUFE QUADRAT 150 MIT 0,05 AUFMASS FERTIG
;ZEITNAHME
N2880 G0 G64 X=-100.194 Y=85.1381 D1
N2900 G0 Z=2
N2920 G1 Z=-20 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N2940 G1 G41 D1 X=-85.1373 Y=75.1385 F=_FED_T1
N2960 G1 X=75.0504 Y=73.7405
N2980 G1 X=73.752 Y=-75.05
N3000 G1 X=-75.05
N3020 G1 Y=85.1381
N3040 G1 G40 X=-85.05 Y=89.5891
;WHEN TRUE DO $AN_SLTRACE=2
N3060 G0 Z=15

;AUSSENKONTUR PR�FEN Z-42 QUADRAT 153MM
;ZEITNAHME
N3080 G0 G64 X=-99.9239 Y=86.5 D1
N3100 G0 Z=2
N3120 G1 Z=-45 F1000
;WHEN TRUE DO $AN_SLTRACE=1
Offn=0
N3140 G1 G41 D1 X=-77.5 Y=77.5 F=_FED_T1
N3160 G1 X=77.5
N3180 G1 Y=-77.5
N3200 G1 X=-77.5
N3220 G1 Y=77.5
N3240 G1 G40 X=-86.5 Y=89.7503
;WHEN TRUE DO $AN_SLTRACE=2
N3260 G0 Z=15

;QUADRAT 142MM MIT0,05MM AUFMASS
;ZEITNAHME
N3280 G0 G64 X=-94.4926 Y=81.05 D1
N3300 G0 Z=2
N3320 G1 Z=-15 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N3340 G1 G41 D1 X=-81.05 Y=71.05 F=_FED_T1
N3360 G1 X=71.05
N3380 G1 Y=-71.05
N3400 G1 X=-71.05
N3420 G1 Y=81.05
N3440 G1 G40 X=-81.05 Y=89.5009
;WHEN TRUE DO $AN_SLTRACE=2
N3460 G0 Z=15

;VORBEREITUNG ECKEN FRAESEN D140
;ZEITNAHME
N3480 G0 G64 X=40.5372 Y=87.0502 D1
N3500 G0 Z=2
N3520 G1 Z=-10 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N3540 G1 X=52.2313 Y=79.3529 F=_FED_T1
N3560 G2 X=79.3529 Y=52.2313 I=-52.231 J=-79.353
N3580 G1 X=87.0502 Y=40.5372
;WHEN TRUE DO $AN_SLTRACE=2
N3600 G0 Z=15

;VORBEREITUNG ECKEN FRAESEN D140
;ZEITNAHME
N3620 G0 G64 X=87.0502 Y=-40.5372 D1
N3640 G0 Z=2
N3660 G1 Z=-10 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N3680 G1 X=79.3529 Y=-52.2313 F=_FED_T1
N3700 G2 X=52.2313 Y=-79.3529 I=-79.353 J=52.231
N3720 G1 X=40.5372 Y=-87.0502
;WHEN TRUE DO $AN_SLTRACE=2
N3740 G0 Z=15

;VORBEREITUNG ECKEN FRAESEN D140
;ZEITNAHME
N3760 G0 G64 X=-40.5372 Y=-87.0502 D1
N3780 G0 Z=2
N3800 G1 Z=-10 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N3820 G1 X=-52.2313 Y=-79.3529 F=_FED_T1
N3840 G2 X=-79.3529 Y=-52.2313 I=52.231 J=79.353
N3860 G1 X=-87.0502 Y=-40.5372
;WHEN TRUE DO $AN_SLTRACE=2
N3880 G0 Z=15

;VORBEREITUNG ECKEN FRAESEN D140
;ZEITNAHME
N3900 G0 G64 X=-87.0502 Y=40.5372 D1
N3920 G0 Z=2
N3940 G1 Z=-10 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N3960 G1 X=-79.3529 Y=52.2313 F=_FED_T1
N3980 G2 X=-52.2313 Y=79.3529 I=79.353 J=-52.231
N4000 G1 X=-40.5372 Y=87.0502
;WHEN TRUE DO $AN_SLTRACE=2
N4020 G0 Z=15

;D140 MIT 0,05MM AUFMASS FRAESEN
;ZEITNAHME
N4040 G0 G64 X=-15.0622 Y=89.2201 D1
N4060 G0 Z=2
N4080 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N4100 G1 G41 D1 X=-8.4168 Y=72.634 F=_FED_T1
N4120 G3 X=0 Y=70.05 I=8.417 J=12.416
N4140 G2 X=0 Y=70.05 I=0 J=-70.05
N4160 G3 X=8.4655 Y=72.6671 I=0 J=15
N4180 G1 G40 X=14.5557 Y=88.9442
;WHEN TRUE DO $AN_SLTRACE=2
N4200 G0 Z=15

;D140 MIT 0,05MM AUFMASS FRAESEN // neu K�sling
;ZEITNAHME
N4040 G0 G64 X=-15.0622 Y=89.2201 D1
N4060 G0 Z=2
N4080 G1 Z=-10 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N4100 G1 G41 D1 X=-8.4168 Y=72.634 F=_FED_T1
N4120 G3 X=0 Y=70.05 I=8.417 J=12.416
N4140 G2 X=0 Y=70.05 I=0 J=-70.05
N4160 G3 X=8.4655 Y=72.6671 I=0 J=15
N4180 G1 G40 X=14.5557 Y=88.9442
;WHEN TRUE DO $AN_SLTRACE=2
N4200 G0 Z=15

;VORBEREITUNG QUADRAT 90 MIT0,05MM AUFMASS
;ZEITNAHME
N4220 G0 G64 X=14.1029 Y=84.8921 D1
N4240 G0 Z=2
N4260 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N4280 G1 X=24.0024 Y=74.9926 F=_FED_T1
N4300 G1 X=74.9926 Y=24.0024
N4320 G1 X=84.8921 Y=14.1029
;WHEN TRUE DO $AN_SLTRACE=2
N4340 G0 Z=15

;VORBEREITUNG QUADRAT 90 MIT0,05MM AUFMASS
;ZEITNAHME
N4360 G0 G64 X=84.8921 Y=-14.1029 D1
N4380 G0 Z=2
N4400 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N4420 G1 X=74.9926 Y=-24.0024 F=_FED_T1
N4440 G1 X=24.0024 Y=-74.9926
N4460 G1 X=14.1029 Y=-84.8921
;WHEN TRUE DO $AN_SLTRACE=2
N4480 G0 Z=15

;VORBEREITUNG QUADRAT 90 MIT0,05MM AUFMASS
;ZEITNAHME
N4500 G0 G64 X=-14.1029 Y=-84.8921 D1
N4520 G0 Z=2
N4540 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N4560 G1 X=-24.0024 Y=-74.9926 F=_FED_T1
N4580 G1 X=-74.9926 Y=-24.0024
N4600 G1 X=-84.8921 Y=-14.1029
;WHEN TRUE DO $AN_SLTRACE=2
N4620 G0 Z=15

;VORBEREITUNG QUADRAT 90 MIT0,05MM AUFMASS
;ZEITNAHME
N4640 G0 G64 X=-84.8921 Y=14.1029 D1
N4660 G0 Z=2
N4680 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N4700 G1 X=-74.9926 Y=24.0024 F=_FED_T1
N4720 G1 X=-24.0024 Y=74.9926
N4740 G1 X=-14.1029 Y=84.8921
;WHEN TRUE DO $AN_SLTRACE=2
N4760 G0 Z=15

;QUADRAT 90 MIT 0,05MM AUFMASS FRAESEN
;ZEITNAHME
N4780 G0 G64 X=-3.7665 Y=81.619 D1
N4800 G0 Z=2
N4820 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1

CFTCP
N4840 G1 G41 D1 X=0.0354 Y=63.675 F=_FED_T1
N4860 G1 X=63.675 Y=0.0354
N4880 G2 X=63.675 Y=-0.0354 I=-0.035 J=-0.035 F=_FED_T1
N4900 G1 X=0.0354 Y=-63.675 F=_FED_T1
N4920 G2 X=-0.0354 Y=-63.675 I=-0.035 J=0.035 F=_FED_T1
N4940 G1 X=-63.675 Y=-0.0354 F=_FED_T1
N4960 G2 X=-63.675 Y=0.0354 I=0.035 J=0.035 F=_FED_T1
N4980 G1 X=-0.0354 Y=63.675 F=_FED_T1
N5000 G2 X=0.0354 Y=63.675 I=0.035 J=-0.035 F=_FED_T1
N5020 G1 G40 X=15.4363 Y=69.9257 F=_FED_T1
CFC
;WHEN TRUE DO $AN_SLTRACE=2
N5040 G0 Z=15

;D25 VORBEAREITEN MIT 0,05MM AUFMASS 3,7 TIEF
;ZEITNAHME
N5060 G0 G9 X=-15 Y=-20 D1
N5080 G0 G64 Z=2
N5100 G1 Z=0 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N5120 G1 G41 D1 X=-5.5543 Y=-23.5864 CFC F=_FED_T1*1.15 ;0.75
N5140 G3 X=-15 Y=-7.55 I=-9.446 J=5.236
N5160 G3 X=-15 Y=-7.55 Z=-1.85 I=0 J=-12.45
N5180 G3 X=-15 Y=-7.55 Z=-3.7 I=0 J=-12.45
N5200 G3 X=-15 Y=-7.55 I=0 J=-12.45
N5220 G3 X=-24.4457 Y=-23.5864 I=0 J=-10.8
N5240 G1 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N5260 G0 Z=-1.7
N5280 G1 Z=-3.7 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N5300 G1 G41 D1 X=-5.6469 Y=-23.8 CFC F=_FED_T1*1.15 ;0.75
N5320 G3 X=-15 Y=-7.6 I=-9.353 J=5.4
N5340 G3 X=-15 Y=-7.6 Z=-5.133 I=0 J=-12.4
N5360 G3 X=-15 Y=-7.6 Z=-6.567 I=0 J=-12.4
N5380 G3 X=-15 Y=-7.6 Z=-8 I=0 J=-12.4
N5400 G3 X=-15 Y=-7.6 I=0 J=-12.4
N5420 G3 X=-24.3531 Y=-23.8 I=0 J=-10.8
N5440 G1 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N5460 G0 Z=15

N5480 WHEN TRUE DO KUEHLUNG_AUS
N5485 CYCLE800()
N5500 D0 G153 G0 Z=_zHOME
N5520 D0 G153 G0 Y=_yHOME
;ZEITNAHME
;M00
;================================================================
;T1
;
;Feature: SIDE_200
;A = 0� ,  B = 270� ;
;================================================================
N5540 G17 G510 G90 G40 D1
;M00 ;SK
N5560 CYCLE800(0,"Licon_AB1",100000,54,77.5,0,0,90,0,0,0,0,0,1,0,0)

;N5580 WHEN TRUE DO M1=3 S1=_SPD_T1 M2=3 S2=_SPD_T1
N5580 WHEN TRUE DO M1=3 S1=_SPD_T1 
N5600 G0 G90 G64 X=-88.8892 Y=-4.8273 D1


;SETLICH SCHRAEG FRAESEN MIT 0,05 AUFMASS
;ZEITNAHME
N5620 G0 Z=15
N5640 G0 Z=2
WHEN TRUE DO KUEHLUNG_EIN
WAITS ;wait until speed is reached
N5660 G1 Z=-5 F1000
;WHEN TRUE DO $AN_SLTRACE=1
N5680 G1 G41 D1 X=-74.9777 Y=-14.9502 CFC F=_FED_T1
N5700 G1 X=75.0004 Y=-16.2705
N5720 G1 G40 X=89.0879 Y=-6.3941
;WHEN TRUE DO $AN_SLTRACE=2
N5740 G0 Z=15
WHEN TRUE DO COOLANT_LP_OFF

N5760 WHEN TRUE DO KUEHLUNG_AUS
N5780 TOOLCOUNTER(1) ;1x/Tool

;ZEITNAHME
;N5800 MOVE_TO_TC(,,1,200)
;ZEITNAHME

;================================================================
;T3
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N5820 LABLE_1: WHEN TRUE DO $R99=1
N5840 G17 G510 G90 G40
;M00 ;SK
;N5860 CYCLE800(0,"Licon_AB1_quick",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N5860 CYCLE800(0,"Licon_AB1",220000,192,0,0,0,-90,180,0,0,0,0,0,0,0)

T="03" ;Werkzeugauswahl
TOOLCHANGE("02",,_TC_A1,_TC_A2,1,200,50,50,)
LI_TOOL_CHECK(228.00,4,1.0,1)

;ZEITNAHME

N5920 G17 G510 G90 G40 D1
N5960 G153 D0 G0 Z=_zHOME


;N6020 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
N6020 WHEN TRUE DO M1=3 S1=_SPD_T3 

;N3240 WHEN TRUE DO $AA_OFF[CHAN_AX]=WZLA_D1 ;Kanalachse korrigieren
N6040 G0 G90 G9 X=-15 Y=-20 D1
N6060 WAITP(A_11,B_11)

;D10 VORFRAESEN 3,7MM TIEF MIT 0,05MM AUFMASS
;ZEITNAHME
N6080 WAITS ;wait until speed is reached
;N6100 WHEN TRUE DO $AA_OFF[CHAN_AX]=WZLA_D1 ;Kanalachse korrigieren
WHEN TRUE DO KUEHLUNG_EIN
WHEN TRUE DO COOLANT_LP_ON
N6120 G0 G64 Z=-6
N6140 G1 Z=-8 F10000
;WHEN TRUE DO $AN_SLTRACE=1
N6160 G1 G41 D1 X=-11.1117 Y=-21.1187 CFC F=_FED_T3
N6180 G3 X=-15 Y=-15.05 I=-3.888 J=1.789
N6200 G3 X=-15 Y=-15.05 Z=-9.85 I=0 J=-4.95
N6220 G3 X=-15 Y=-15.05 Z=-11.7 I=0 J=-4.95
N6240 G3 X=-15 Y=-15.05 I=0 J=-4.95
N6260 G3 X=-18.8883 Y=-21.1187 I=0 J=-4.28
N6280 G1 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N6300 G1 Z=-11.5
;WHEN TRUE DO $AN_SLTRACE=1
N6320 G1 G41 D1 X=-11.1813 Y=-21.3129
N6340 G3 X=-15 Y=-15.1 I=-3.819 J=1.933
N6360 G3 X=-15 Y=-15.1 Z=-13.75 I=0 J=-4.9
N6380 G3 X=-15 Y=-15.1 Z=-16 I=0 J=-4.9
N6400 G3 X=-15 Y=-15.1 I=0 J=-4.9
N6420 G3 X=-18.8187 Y=-21.3129 I=0 J=-4.28
N6440 G1 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N6460 G0 Z=15
WHEN TRUE DO COOLANT_LP_OFF
N6480 WHEN TRUE DO KUEHLUNG_AUS
N6500 TOOLCOUNTER(1) ;1x/Tool

;ZEITNAHME
;N6520 MOVE_TO_TC(,,2,50)
;ZEITNAHME


;================================================================
;T2
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N6540 LABLE_2: WHEN TRUE DO $R99=2
N6560 G17 G510 G90 G40
;M00 ;SK
;N6580 CYCLE800(0,"Licon_AB1_quick",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N6580 CYCLE800(0,"Licon_AB1",220000,192,0,0,0,-90,180,0,0,0,0,0,0,0)

T="02" ;Werkzeugauswahl
TOOLCHANGE("03",,_TC_A1,_TC_A2,2,200,50,50,)
LI_TOOL_CHECK(268.00,0,0.5,1)

;ZEITNAHME

N6640 G17 G510 G90 G40 D1
;N6740 WHEN TRUE DO M1=3 S1=_SPD_T2 M2=3 S2=_SPD_T2 KUEHLUNG_EIN
N6740 WHEN TRUE DO M1=3 S1=_SPD_T2 KUEHLUNG_EIN
N6680 G153 D0 G0 G64 Z=_zHOME


;N6760 WHEN TRUE DO $AA_OFF[CHAN_AX]=WZLA_D1 ;Kanalachse korrigieren
N6780 G0 G90 G9 X=0 Y=0 D1
N6800 WAITP(A_11,B_11)
;----------------------------------------------------------

;MITTENBOHRUNG VORBOHREN
;ZEITNAHME
N6820 G0 Z=15
N6840 WAITS ;wait until speed is reached
;WHEN TRUE DO $AN_SLTRACE=1
N6860 G0 Z=5 D1
N6880 G1 Z=-15.6 F=_FED_T2
;WHEN TRUE DO $AN_SLTRACE=2
N6900 WHEN TRUE DO TM_OFF
N6920 G0 D1 Z15

;4 BOHRUNGEN VORBOHREN
;ZEITNAHME
N6940 G0 G9 X=-40 Y=-40 D1
N6960 G0 Z=15
;WHEN TRUE DO $AN_SLTRACE=1
N6980 G0 Z=0 D1
N7000 G1 Z=-20.6 F=_FED_T2
;WHEN TRUE DO $AN_SLTRACE=2
N7020 WHEN TRUE DO TM_OFF
N7040 G0 D1 Z15

;4 BOHRUNGEN VORBOHREN
N7060 G0 G9 Y=40

N7100 G0 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N7120 G1 Z=-20.6
;WHEN TRUE DO $AN_SLTRACE=2
N7140 WHEN TRUE DO TM_OFF
N7160 G0 D1 Z15

;4 BOHRUNGEN VORBOHREN
N7180 G0 G9 X=40

N7220 G0 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N7240 G1 Z=-20.6
;WHEN TRUE DO $AN_SLTRACE=2
N7260 WHEN TRUE DO TM_OFF
N7280 G0 D1 Z15

;4 BOHRUNGEN VORBOHREN
N7300 G0 G9 Y=-40

N7340 G0 Z=0
;WHEN TRUE DO $AN_SLTRACE=1
N7360 G1 Z=-20.6
;WHEN TRUE DO $AN_SLTRACE=2
N7380 WHEN TRUE DO TM_OFF
N7400 G0 D1 Z15

N7420 CYCLE800()
N7440 WHEN TRUE DO KUEHLUNG_AUS
N7460 D0 G153 G0 Z=_zHOME
N7480 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T2
;
;Feature: SIDE_200
;A = 0� ,  B = 270� ;
;================================================================
N7500 G17 G510 G90 G40 D1
;M00 ;SK
N7520 CYCLE800(0,"Licon_AB1",100000,54,-77.5,0,0,270,0,0,0,0,0,1,0,0)

;N7540 WHEN TRUE DO M1=3 S1=_SPD_T2 M2=3 S2=_SPD_T2 KUEHLUNG_EIN
N7540 WHEN TRUE DO M1=3 S1=_SPD_T2 KUEHLUNG_EIN
N7560 G0 G90 G9 X=0 Y=-32.5 D1


;VORBOHREN LINKE SEITE
;ZEITNAHME
;WHEN TRUE DO $AN_SLTRACE=1
N7580 G0 G64 Z=5 D1
WAITS ;wait until speed is reached
N7600 G1 Z=-35.6 F=_FED_T2
;WHEN TRUE DO $AN_SLTRACE=2
N7620 WHEN TRUE DO TM_OFF
N7640 G0 G64 D1 Z15

N7660 CYCLE800()
N7680 WHEN TRUE DO KUEHLUNG_AUS
N7700 D0 G153 G0 Z=_zHOME
N7720 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T2
;
;Feature: SIDE_300
;A = 0� ,  B = 90� ;
;================================================================
N7740 G17 G510 G90 G40 D1
;M00 ;SK
N7760 CYCLE800(0,"Licon_AB1",100000,54,77.5,0,0,90,0,0,0,0,0,1,0,0)

;N7780 WHEN TRUE DO M1=3 S1=_SPD_T2 M2=3 S2=_SPD_T2 KUEHLUNG_EIN
N7780 WHEN TRUE DO M1=3 S1=_SPD_T2 KUEHLUNG_EIN
N7800 G0 G90 G9 X=0 Y=-32.5 D1


;VORBOHREN RECHTE SEITE
;ZEITNAHME
;WHEN TRUE DO $AN_SLTRACE=1
N7820 G0 G64 Z=5 D1
WAITS ;wait until speed is reached
N7840 G1 Z=-35.6 F=_FED_T2
;WHEN TRUE DO $AN_SLTRACE=2
N7860 WHEN TRUE DO TM_OFF
N7880 G0 G64 D1 Z15

N7900 WHEN TRUE DO KUEHLUNG_AUS
N7920 TOOLCOUNTER(1) ;1x/Tool

;ZEITNAHME
;N6520 MOVE_TO_TC(,,2,50)
;ZEITNAHME

;================================================================
;T3
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N7960 LABLE_3: WHEN TRUE DO $R99=3
N7980 G17 G510 G90 G40
;M00 ;SK
;N8000 CYCLE800(0,"Licon_AB1_quick",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N8000 CYCLE800(0,"Licon_AB1",220000,192,0,0,0,-90,180,0,0,0,0,0,0,0)

T="03" ;Werkzeugauswahl
TOOLCHANGE("04",,_TC_A1,_TC_A2,2,200,50,50,)
LI_TOOL_CHECK(228.00,4,1.0,1)

N8040 IF EINFAHREN==0
N8050   G4 F900 ;Prozessbedingte Verweilzeit
N8060 ENDIF
;ZEITNAHME

N8070 G17 G510 G90 G40 D1
;N8160 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
N8160 WHEN TRUE DO M1=3 S1=_SPD_T3 
N8100 G153 D0 G0 G64 Z=_zHOME

;N8180 WHEN TRUE DO $AA_OFF[CHAN_AX]=WZLA_D1 ;Kanalachse korrigieren
N8200 G0 G90 G9 X=0 Y=0 D1
N8220 WAITP(A_11,B_11)
WHEN TRUE DO KUEHLUNG_EIN
WHEN TRUE DO COOLANT_LP_ON

GOTOF OHNE_VORFR  ;Koesling


;MITTENBOHRUNG VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N8240 G0 Z=2
N8260 WAITS ;wait until speed is reached
N8280 G1 Z=-5 CFC F=_FED_T3
;WHEN TRUE DO $AN_SLTRACE=1
N8300 G1 G41 D1 X=4.7158 Y=-0.7768
N8320 G3 X=0 Y=9.95 I=-4.716 J=4.327
N8340 G3 X=0 Y=9.95 I=0 J=-9.95
N8360 G3 X=-4.7158 Y=-0.7768 I=0 J=-6.4
N8380 G1 G40 X=0 Y=0
;WHEN TRUE DO $AN_SLTRACE=2
N8400 G0 Z=15

;4 BOHRUNGEN VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N8420 G0 G9 X=-40 Y=-40 D1
N8440 G0 Z=-3
N8460 G1 Z=-10
;WHEN TRUE DO $AN_SLTRACE=1
N8480 G1 G41 D1 X=-35.2842 Y=-40.7768
N8500 G3 X=-40 Y=-30.05 I=-4.716 J=4.327
N8520 G3 X=-40 Y=-30.05 I=0 J=-9.95
N8540 G3 X=-44.7158 Y=-40.7768 I=0 J=-6.4
N8560 G1 G40 X=-40 Y=-40
;WHEN TRUE DO $AN_SLTRACE=2
N8580 G0 Z=15

;4 BOHRUNGEN VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N8600 G0 G9 X=-40 Y=40 D1
N8620 G0 Z=-3
N8640 G1 Z=-10
;WHEN TRUE DO $AN_SLTRACE=1
N8660 G1 G41 D1 X=-35.2842 Y=39.2232
N8680 G3 X=-40 Y=49.95 I=-4.716 J=4.327
N8700 G3 X=-40 Y=49.95 I=0 J=-9.95
N8720 G3 X=-44.7158 Y=39.2232 I=0 J=-6.4
N8740 G1 G40 X=-40 Y=40
;WHEN TRUE DO $AN_SLTRACE=2
N8760 G0 Z=15

;4 BOHRUNGEN VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N8780 G0 G9 X=40 Y=40 D1
N8800 G0 Z=-3
N8820 G1 Z=-10
;WHEN TRUE DO $AN_SLTRACE=1
N8840 G1 G41 D1 X=44.7158 Y=39.2232
N8860 G3 X=40 Y=49.95 I=-4.716 J=4.327
N8880 G3 X=40 Y=49.95 I=0 J=-9.95
N8900 G3 X=35.2842 Y=39.2232 I=0 J=-6.4
N8920 G1 G40 X=40 Y=40
;WHEN TRUE DO $AN_SLTRACE=2
N8940 G0 Z=15

;4 BOHRUNGEN VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N8960 G0 G9 X=40 Y=-40 D1
N8980 G0 Z=-3
N9000 G1 Z=-10
;WHEN TRUE DO $AN_SLTRACE=1
N9020 G1 G41 D1 X=44.7158 Y=-40.7768
N9040 G3 X=40 Y=-30.05 I=-4.716 J=4.327
N9060 G3 X=40 Y=-30.05 I=0 J=-9.95
N9080 G3 X=35.2842 Y=-40.7768 I=0 J=-6.4
N9100 G1 G40 X=40 Y=-40
;WHEN TRUE DO $AN_SLTRACE=2
N9120 G0 Z=15

N9140 WHEN TRUE DO KUEHLUNG_AUS
N9150 CYCLE800()
N9160 D0 G153 G0 Z=_zHOME
N9180 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T3
;
;Feature: SIDE_200
;A = 0� ,  B = 270� ;
;================================================================
N9200 G17 G510 G90 G40 D1
;M00 ;SK
N9220 CYCLE800(0,"Licon_AB1",100000,54,-77.5,0,0,270,0,0,0,0,0,1,0,0)

;N9240 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
WHEN TRUE DO KUEHLUNG_EIN
N9240 WHEN TRUE DO M1=3 S1=_SPD_T3 
N9260 G0 G90 G9 X=0 Y=-32.5 D1


;BOHRUNG VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N9280 G0 G64 Z=2
WAITS ;wait until speed is reached
N9300 G1 Z=-5
;WHEN TRUE DO $AN_SLTRACE=1
N9320 G1 G41 D1 X=0.7768 Y=-27.7842
N9340 G3 X=-9.95 Y=-32.5 I=-4.327 J=-4.716
N9360 G3 X=-9.95 Y=-32.5 I=9.95 J=0
N9380 G3 X=0.7768 Y=-37.2158 I=6.4 J=0
N9400 G1 G40 X=0 Y=-32.5
;WHEN TRUE DO $AN_SLTRACE=2
N9420 G0 G64 Z=15

N9440 WHEN TRUE DO KUEHLUNG_AUS
N9460 D0 G153 G0 Z=_zHOME
N9480 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T3
;
;Feature: SIDE_300
;A = 0� ,  B = 90� ;
;================================================================
N9500 G17 G510 G90 G40 D1
;M00 ;SK
N9520 CYCLE800(0,"Licon_AB1",100000,54,77.5,0,0,90,0,0,0,0,0,1,0,0)

;N9540 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
WHEN TRUE DO KUEHLUNG_EIN
N9540 WHEN TRUE DO M1=3 S1=_SPD_T3 
N9560 G0 G90 G9 X=0 Y=-32.5 D1

;BOHRUNG VORBEARBEITEN MIT 0,05MM AUFMASS
;ZEITNAHME
N9580 G0 G64 Z=2
WAITS ;wait until speed is reached
N9600 G1 Z=-5
;WHEN TRUE DO $AN_SLTRACE=1
N9620 G1 G41 D1 X=-0.7768 Y=-37.2158
N9640 G3 X=9.95 Y=-32.5 I=4.327 J=4.716
N9660 G3 X=9.95 Y=-32.5 I=-9.95 J=0
N9680 G3 X=-0.7768 Y=-27.7842 I=-6.4 J=0
N9700 G1 G40 X=0 Y=-32.5
;WHEN TRUE DO $AN_SLTRACE=2
N9720 G0 Z=15

OHNE_VORFR:

N9740 WHEN TRUE DO KUEHLUNG_AUS
N9760 D0 G153 G0 Z=_zHOME
N9780 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T3
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N9800 G17 G510 G90 G40 D1
;M00 ;SK
;N9820 CYCLE800(0,"Licon_AB1",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N9820 CYCLE800(0,"Licon_AB1",100000,192,0,0,0,-90,180,0,0,0,0,1,0,0)

;N9840 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
WHEN TRUE DO KUEHLUNG_EIN
N9840 WHEN TRUE DO M1=3 S1=_SPD_T3 
N9860 G0 G90 G64 X=-14.5665 Y=-56.9928 D1

;N FERTIG BEARBEITEN Z-0,2
;ZEITNAHME
N9880 G0 Z=0
WAITS ;wait until speed is reached
N9900 G1 Z=-0.2 F=_FED_T3
;WHEN TRUE DO $AN_SLTRACE=1
N9920 G1 G41 D1 X=-7.7782 Y=-55.8614
N9940 G1 X=-1.4181 Y=-49.5013
N9960 G3 X=-15.5602 Y=-35.3592 I=-7.054 J=7.088
N9980 G1 X=-21.9203 Y=-41.7192
N10000 G1 G40 X=-23.0517 Y=-48.5074
;WHEN TRUE DO $AN_SLTRACE=2
N10020 G0 Z=15

;D25 3,5MM TIEF FERTIG BEARBEITEN MIT HALBEM VORSCHUB
;ZEITNAHME
N10040 G0 G9 X=-15 Y=-20 D1
N10060 G0 G64 Z=0
N10080 G1 Z=-3.5 F=_FED_T3/2
;WHEN TRUE DO $AN_SLTRACE=1
N10100 G1 G41 D1 X=-11.335 Y=-22.6111
N10120 G3 X=-15 Y=-7.5 I=-3.665 J=7.111
N10140 G3 X=-15 Y=-7.5 I=0 J=-12.5
N10160 G3 X=-18.665 Y=-22.6111 I=0 J=-8
N10180 G1 G9 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N10200 G1 Z=-8 F=_FED_T3
;WHEN TRUE DO $AN_SLTRACE=1
N10220 G1 G41 D1 X=-11.335 Y=-22.6111
N10240 G3 X=-15 Y=-7.5 I=-3.665 J=7.111
N10260 G3 X=-15 Y=-7.5 I=0 J=-12.5
N10280 G3 X=-18.665 Y=-22.6111 I=0 J=-8
N10300 G1 G9 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N10320 G1 Z=-11.5
;WHEN TRUE DO $AN_SLTRACE=1
N10340 G1 G41 D1 X=-11.7204 Y=-22.3333
N10360 G3 X=-15 Y=-15 I=-3.28 J=2.933
N10380 G3 X=-15 Y=-15 I=0 J=-5
N10400 G3 X=-18.2796 Y=-22.3333 I=0 J=-4.4
N10420 G1 G9 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N10440 G0 Z=-6
N10460 G1 Z=-15.8
;WHEN TRUE DO $AN_SLTRACE=1
N10480 G1 G41 D1 X=-11.9801 Y=-22.65
N10500 G3 X=-15 Y=-15.05 I=-3.02 J=3.2
N10520 G3 X=-15 Y=-15.05 I=0 J=-4.95
N10540 G3 X=-18.0199 Y=-22.65 I=0 J=-4.4
N10560 G1 G40 X=-15 Y=-20
;WHEN TRUE DO $AN_SLTRACE=2
N10580 G0 Z=15

;ELEMENT 2 QUADER 45GRAD 90MM FERTIG BEARBEITEN
;ZEITNAHME
N10600 G0 G64 X=-5.3498 Y=74.6463 D1
N10620 G0 Z=2
N10640 G1 Z=-4.8
;WHEN TRUE DO $AN_SLTRACE=1
N10660 G1 G41 D1 X=-2.8284 Y=66.468
N10680 G1 X=69.2965 Y=-5.6569
N10700 G3 X=69.2965 Y=5.6569 I=5.657 J=5.657
N10720 G1 X=-5.6569 Y=-69.2965
N10740 G3 X=5.6569 Y=-69.2965 I=5.657 J=-5.657
N10760 G1 X=-69.2965 Y=5.6569
N10780 G3 X=-69.2965 Y=-5.6569 I=-5.657 J=-5.657
N10800 G1 X=2.8284 Y=66.468
N10820 G1 G40 X=5.6972 Y=74.9936
;WHEN TRUE DO $AN_SLTRACE=2
N10840 G0 Z=15

;ELEMENT 3 ZYLINDER D140
;ZEITNAHME
N10860 G0 G64 X=-31.0258 Y=67.7216 D1
N10880 G0 Z=2
N10900 G1 Z=-9.8
;WHEN TRUE DO $AN_SLTRACE=1
N10920 G1 G41 D1 X=-29.8144 Y=64.5309
N10940 G2 X=0 Y=70 I=29.814 J=-78.531
N10960 G2 X=0 Y=70 I=0 J=-70
N10980 G2 X=29.0077 Y=64.8324 I=0 J=-84
N11000 G1 G40 X=30.2302 Y=68.1547
;WHEN TRUE DO $AN_SLTRACE=2
N11020 G0 Z=15

;ELEMENT 4 QUADER 90GRAD 142MM
;ZEITNAHME
N11040 G0 G64 X=-82.511 Y=75 D1
N11060 G0 Z=2
N11080 G1 Z=-14.8
;WHEN TRUE DO $AN_SLTRACE=1
N11100 G1 G41 D1 X=-75 Y=71
N11120 G1 X=79
N11140 G3 X=71 Y=79 I=0 J=8
N11160 G1 Y=-79
N11180 G3 X=79 Y=-71 I=8 J=0
N11200 G1 X=-79
N11220 G3 X=-71 Y=-79 I=0 J=-8
N11240 G1 Y=75
N11260 G1 G40 X=-75 Y=82.3848
;WHEN TRUE DO $AN_SLTRACE=2
N11280 G0 Z=15

;2 ELEMENTE SCHRAEG FRASEN
;ZEITNAHME
N11300 G0 G64 X=-80.5649 Y=79.0487 D1
N11320 G0 Z=2
N11340 G1 Z=-19.8
;WHEN TRUE DO $AN_SLTRACE=1
N11360 G1 G41 D1 X=-75 Y=75
N11380 G1 X=75 Y=73.691
N11400 G1 G40 X=80.6347 Y=77.6419
;WHEN TRUE DO $AN_SLTRACE=2
N11420 G0 Z=15

;0
;ZEITNAHME
N11440 G0 G64 X=79.0487 Y=79.2559 D1
N11460 G0 Z=2
N11480 G1 Z=-19.8
;WHEN TRUE DO $AN_SLTRACE=1
N11500 G1 G41 D1 X=75 Y=73.691
N11520 G1 X=73.7024 Y=-75
N11540 G1 G40 X=77.6534 Y=-80.6347
;WHEN TRUE DO $AN_SLTRACE=2
N11560 G0 Z=15

N11580 WHEN TRUE DO KUEHLUNG_AUS
N115858 CYCLE800()
N11600 D0 G153 G0 Z=_zHOME
N11620 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T3
;
;Feature: SIDE_200
;A = 0� ,  B = 270� ;
;================================================================
N11640 G17 G510 G90 G40 D1
;M00 ;SK
N5560 CYCLE800(0,"Licon_AB1",100000,54,77.5,0,0,90,0,0,0,0,0,1,0,0)

;N11680 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
WHEN TRUE DO KUEHLUNG_EIN
N11680 WHEN TRUE DO M1=3 S1=_SPD_T3 
N11700 G0 G90 G64 X=-80.5428 Y=-10.9511 D1


;SEITLICH SCHRAEG FRAESEN
;ZEITNAHME
N11720 G0 Z=2
WAITS ;wait until speed is reached
N11740 G1 Z=-4.8
;WHEN TRUE DO $AN_SLTRACE=1
N11760 G1 G41 D1 X=-74.9782 Y=-15.0002
N11780 G1 X=75 Y=-16.3205
N11800 G1 G40 X=80.635 Y=-12.3699
;WHEN TRUE DO $AN_SLTRACE=2
N11820 G0 Z=15

N11840 WHEN TRUE DO KUEHLUNG_AUS
N11850 CYCLE800()
N11860 D0 G153 G0 Z=_zHOME
;N11880 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;M00 ; Achtung einfahren  

;================================================================
;T3
;
;Feature: SIDE_100
;A = 0� ,  B = 0� ;
;================================================================
N11640 G17 G510 G90 G40 D1
;M00 ;SK

N11660 CYCLE800(0,"Licon_AB1",100000,54,0,0,0,180,0,0,0,0,0,1,0,0)
;N11680 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
WHEN TRUE DO KUEHLUNG_EIN
N11680 WHEN TRUE DO M1=3 S1=_SPD_T3 
N11700 G0 G90 G64 X=-80.5428 Y=-10.9511 D1


;SEITLICH SCHRAEG FRAESEN
;ZEITNAHME
N11720 G0 Z=2+77.5
WAITS ;wait until speed is reached
N11740 G1 Z=-4.8+77.5
;WHEN TRUE DO $AN_SLTRACE=1
N11760 G1 G41 D1 X=-74.9782 Y=-16.3205
N11780 G1 X=75 Y=-15.0002 
N11800 G1 G40 X=80.635 Y=-10.3699
;WHEN TRUE DO $AN_SLTRACE=2
N11820 G0 Z=15+77.5

N11840 WHEN TRUE DO KUEHLUNG_AUS
N11850 CYCLE800()
N11860 D0 G153 G0 Z=_zHOME
N11880 D0 G153 G0 Y=_yHOME
;ZEITNAHME


;================================================================
;T3
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N11900 G17 G510 G90 G40 D1
;M00 ;SK
;N11920 CYCLE800(0,"Licon_AB1",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N11920 CYCLE800(0,"Licon_AB1",100000,192,0,0,0,-90,180,0,0,0,0,1,0,0)

;N11940 WHEN TRUE DO M1=3 S1=_SPD_T3 M2=3 S2=_SPD_T3
WHEN TRUE DO KUEHLUNG_EIN
N11940 WHEN TRUE DO M1=3 S1=_SPD_T3 
N11960 G0 G90 G64 X=15.2735 Y=-56.2857 D1


;C BEARBEITEN FERTIG
;ZEITNAHME
N11980 G0 Z=2
WAITS ;wait until speed is reached
N12000 G1 Z=-0.3
;WHEN TRUE DO $AN_SLTRACE=1
N12020 G1 G41 D1 X=14.1421 Y=-49.4975
N12040 G1 X=7.782 Y=-43.1374
N12060 G3 X=-6.3601 Y=-57.2794 I=-7.088 J=-7.054
N12080 G1 X=0 Y=-63.6396
N12100 G1 G40 X=6.7882 Y=-64.771
;WHEN TRUE DO $AN_SLTRACE=2
N12120 G0 Z=15
WHEN TRUE DO COOLANT_LP_OFF
N12140 WHEN TRUE DO KUEHLUNG_AUS
N12160 TOOLCOUNTER(1) ;1x/Tool

;ZEITNAHME
;N12180 MOVE_TO_TC(,,2,50)
;ZEITNAHME


;================================================================
;T4
;
;Feature: SIDE_100
;A = -90� ,  B = 360� ;
;================================================================
N12200 LABLE_4: WHEN TRUE DO $R99=4

N12220 G17 G510 G90 G40
M00 ;Achtung die Spindelpositionierung muss ueberprueft werden.
M00 ;Die Schneide hebt 0.5mm von der Kontur ab.
;N12240 CYCLE800(0,"Licon_AB1",100000,54,0,0,0,0,-90,0,0,0,0,1,0,0)
N12240 CYCLE800(0,"Licon_AB1",220000,192,0,0,0,-90,180,0,0,0,0,0,0,0)

T="04" ;Werkzeugauswahl
TOOLCHANGE("01",,_TC_A1,_TC_A2,2,200,50,50,)
LI_TOOL_CHECK(218.00,0,0.5,1)

;ZEITNAHME

N12300 G17 G510 G90 G40 D1
N12340 G153 D0 G0 G64 Z=_zHOME

;N12400 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4 KUEHLUNG_EIN
N12400 WHEN TRUE DO M1=3 S1=_SPD_T4 KUEHLUNG_EIN
N12420 G0 G90 G9 X=0 Y=0 D1
N12440 WAITP(A_11,B_11)
;----------------------------------------------------------

;AUSSPINDELN MITTEN BOHRUNG D20
;ZEITNAHME
N12460 G0 G64 Z=5
N12480 WAITS ;wait until speed is reached
;WHEN TRUE DO $AN_SLTRACE=1
N12500 G0 G9 X=0 Y=0 D1
N12520 G1 G90 Z=-4.8 F=_FED_T4
;WHEN TRUE DO $AN_SLTRACE=2
;N12540 SPOS[1]=DC(180) SPOS[2]=DC(180)
N12540 SPOS[1]=DC(180) 
N12560 G0 G91 Y=0.5
; ACHTUNG Auslenkung Prüfen !!!
N12580 G1 G90 Z=5 D1 F=10000

;AUSSPINDELN 4 BOHRUNGEN
;ZEITNAHME
;N12600 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4
N12600 WHEN TRUE DO M1=3 S1=_SPD_T4 
N12620 G0 G9 X=-40 Y=-40 D1
WAITS ;wait until speed is reached
N12640 G1 G90 Z=-9.8 F=_FED_T4
;N12660 SPOS[1]=DC(180) SPOS[2]=DC(180)
N12660 SPOS[1]=DC(180) 
N12680 G0 G91 Y=0.5
N12700 G1 G90 Z=5 D1 F=10000

;N12720 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4
N12720 WHEN TRUE DO M1=3 S1=_SPD_T4 
N12740 G0 G9 Y=40 D1
WAITS ;wait until speed is reached
N12760 G1 G90 Z=-9.8 F=_FED_T4
;N12780 SPOS[1]=DC(180) SPOS[2]=DC(180)
N12780 SPOS[1]=DC(180) 
N12800 G0 G91 Y=0.5
N12820 G1 G90 Z=5 D1 F=10000

;N12840 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4
N12840 WHEN TRUE DO M1=3 S1=_SPD_T4 
N12860 G0 G9 X=40 Y=40 D1
WAITS ;wait until speed is reached
N12880 G1 G90 Z=-9.8 F=_FED_T4
;N12900 SPOS[1]=DC(180) SPOS[2]=DC(180)
N12900 SPOS[1]=DC(180)
N12920 G0 G91 Y=0.5
N12940 G1 G90 Z=5 D1 F=10000

;N12960 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4
N12960 WHEN TRUE DO M1=3 S1=_SPD_T4 
N12980 G0 G9 Y=-40 D1
WAITS ;wait until speed is reached
N13000 G1 G90 Z=-9.8 F=_FED_T4
;N13020 SPOS[1]=DC(180) SPOS[2]=DC(180)
N13020 SPOS[1]=DC(180) 
N13040 G0 G91 Y=0.5
N13060 G1 G90 Z=5 D1 F=10000

N13080 WHEN TRUE DO KUEHLUNG_AUS
N13100 D0 G153 G0 Z=_zHOME
N13120 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T4
;
;Feature: SIDE_200
;A = 0� ,  B = 270� ;
;================================================================
N13140 G17 G510 G90 G40 D1
;M00 ;SK
N13160 CYCLE800(0,"Licon_AB1",100000,54,-77.5,0,0,270,0,0,0,0,0,1,0,0)

;N13180 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4 KUEHLUNG_EIN
N13180 WHEN TRUE DO M1=3 S1=_SPD_T4 KUEHLUNG_EIN
N13200 G0 G90 G9 X=0 Y=-32.5 D1

;AUSSPINDELN D20
;ZEITNAHME
N13220 G0 G64 Z=5
WAITS ;wait until speed is reached
N13240 G1 G90 Z=-4.8 F=_FED_T4
;N13260 SPOS[1]=DC(180) SPOS[2]=DC(180)
N13260 SPOS[1]=DC(180) 
N13280 G0 G91 Y=0.5
N13300 G1 G90 Z=5 D1 F=10000

N13320 WHEN TRUE DO KUEHLUNG_AUS
N13340 D0 G153 G0 Z=_zHOME
N13360 D0 G153 G0 Y=_yHOME
;ZEITNAHME

;================================================================
;T4
;
;Feature: SIDE_300
;A = 0� ,  B = 90� ;
;================================================================
N13380 G17 G510 G90 G40 D1
;M00 ;SK
N13400 CYCLE800(0,"Licon_AB1",100000,54,77.5,0,0,90,0,0,0,0,0,1,0,0)

;N13420 WHEN TRUE DO M1=3 S1=_SPD_T4 M2=3 S2=_SPD_T4 KUEHLUNG_EIN
N13420 WHEN TRUE DO M1=3 S1=_SPD_T4 KUEHLUNG_EIN
N13440 G0 G90 G9 X=0 Y=-32.5 D1

;AUSSPINDELN D20
;ZEITNAHME
N13460 G0 G64 Z=5
N13480 G0 G9 X=0 Y=-32.5 D1
WAITS ;wait until speed is reached
N13500 G1 G90 Z=-4.8 F=_FED_T4
;N13520 SPOS[1]=DC(180) SPOS[2]=DC(180)
N13520 SPOS[1]=DC(180)
N13540 G0 G91 Y=0.5
N13560 G1 G90 Z=5 D1 F=10000


N5760 WHEN TRUE DO KUEHLUNG_AUS
N5780 TOOLCOUNTER(1) ;1x/Tool

;ZEITNAHME
;N5800 MOVE_TO_TC(,,1,200)

CYCLE800()
N13340 D0 G153 G0 Z=_zHOME
N13360 D0 G153 G0 Y=_yHOME

N13640 RET






